import{d as g,E as k,f as a,N as b,h as y,i as x,r as C,c as l,F as w,n as T,x as I,e as M,k as f,o as n,q as N,j as E,G as j,_ as F}from"./index-RAOsyFim.js";const S={class:"transactions-wrapper"},V={key:0,class:"loader"},q=g({__name:"Transactions",setup(G){const h=k(),m=f("axios"),B=f("user"),i=a([]),s=a(!1),d=a(1),o=a(!0),t=a(null);let r=null;const p=e=>({id:e.id,type:e.typeBTC_name,status:e.status_name,date:e.created_at,amount:`${e.BTC_summ} BTC`,hashid:e.hashid}),v=async()=>{if(!(s.value||!o.value)){s.value=!0;try{const c=(await m.get("/user/get_transactions/",{params:{user_id:B.data.user_id,cursor:d.value}})).data.map(p);c.length<10&&(o.value=!1),i.value.push(...c),d.value+=1}catch(e){console.error("Error occurred while fetching transactions:",e)}finally{s.value=!1}}},u=b();return y(()=>{u.showBackButton(),r=new IntersectionObserver(e=>{e[0].isIntersecting&&o.value&&!s.value&&v()},{threshold:.1}),t.value&&r.observe(t.value),v()}),x(()=>{r&&t.value&&r.unobserve(t.value),r=null,u.hideBackButton()}),u.onBackButtonClicked(()=>{C.push("/")}),(e,c)=>(n(),l("div",S,[(n(!0),l(w,null,T(i.value,_=>(n(),N(j,{key:_.id,"is-blurred":E(h).isBlurred,transaction:_},null,8,["is-blurred","transaction"]))),128)),s.value?(n(),l("div",V,"Загрузка...")):I("",!0),M("div",{ref_key:"loadMoreTrigger",ref:t},null,512)]))}}),O=F(q,[["__scopeId","data-v-9d7e1ca7"]]);export{O as default};
