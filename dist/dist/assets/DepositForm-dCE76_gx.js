import{_ as h,o as g,c as w,e as a,d as O,f as p,u as Z,g as u,N as $,r as _,h as S,i as T,A as j,t as d,a as v,k as f,l as q,$ as H}from"./index-RAOsyFim.js";const L={},R={width:"21",height:"24",viewBox:"0 0 21 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function U(k,o){return g(),w("svg",R,o[0]||(o[0]=[a("path",{d:"M2.58137 0.105292C1.74468 0.376495 1.02917 1.10932 0.781045 1.95178C0.700261 2.22876 0.688721 2.95581 0.688721 8.21254C0.688721 14.0463 0.688721 14.1675 0.804126 14.3521C0.977235 14.6291 1.2369 14.7676 1.61197 14.7676C1.98703 14.7676 2.2467 14.6291 2.41981 14.3521C2.53521 14.1675 2.53521 14.0463 2.53521 8.50682C2.53521 5.32163 2.55829 2.75385 2.59291 2.62691C2.65639 2.34416 2.80641 2.13643 3.06031 1.9864C3.25073 1.87677 3.38921 1.871 8.16124 1.84215C12.7659 1.8133 13.0833 1.80752 13.2275 1.70943C13.4872 1.54209 13.6142 1.27666 13.6142 0.918901C13.6142 0.543834 13.4757 0.28417 13.1987 0.111062C13.014 0.0014267 12.8986 -0.00434303 7.95928 0.0014267C3.22764 0.0014267 2.8872 0.00719738 2.58137 0.105292Z",fill:"#B1C1D2"},null,-1),a("path",{d:"M6.27424 3.7983C5.43755 4.0695 4.72204 4.80233 4.47392 5.64479C4.39313 5.92754 4.38159 6.81616 4.38159 13.8501C4.38159 21.4323 4.38736 21.7554 4.49123 22.0901C4.75666 22.9383 5.48372 23.6596 6.33772 23.9077C6.61469 23.9885 7.34752 24.0001 12.6908 24.0001C18.0341 24.0001 18.7669 23.9885 19.0439 23.9077C19.8979 23.6596 20.6249 22.9383 20.8904 22.0901C20.9942 21.7554 21 21.4323 21 13.8444C21 6.25644 20.9942 5.93331 20.8904 5.59863C20.6249 4.7504 19.8979 4.02911 19.0439 3.78099C18.7669 3.70021 18.0341 3.68867 12.6677 3.69444C6.94937 3.69444 6.58584 3.70021 6.27424 3.7983ZM18.6284 5.67941C18.8823 5.82944 19.0323 6.03717 19.0958 6.31991C19.1651 6.61997 19.1651 21.0688 19.0958 21.3688C19.0323 21.6516 18.8823 21.8593 18.6284 22.0093C18.438 22.1247 18.3284 22.1247 12.6908 22.1247C7.0013 22.1247 6.94937 22.1247 6.74741 22.0035C6.47043 21.842 6.29733 21.5708 6.25693 21.213C6.23962 21.0457 6.22808 17.6124 6.23962 13.5847C6.25693 6.37762 6.25693 6.25067 6.37234 6.06025C6.5166 5.8179 6.7301 5.65056 6.98399 5.59286C7.09362 5.56401 9.71333 5.55247 12.8062 5.55247C18.3226 5.56401 18.438 5.56401 18.6284 5.67941Z",fill:"#B1C1D2"},null,-1)]))}const b=h(L,[["render",U]]),V={class:"deposit-form"},z={class:"form-fields"},E={class:"field-block"},G={class:"field-value"},J={class:"field-block"},K={class:"field-value"},P={class:"field-block"},Q={class:"field-container"},W={class:"field-value"},X=O({__name:"DepositForm",setup(k){p(!1);const o=f("axios"),y=f("user"),n=q();console.log(n.params);const t=p(null),x=async()=>{var s,e,c,C;try{const l=await o.post("/rub/deposit/createtransaction/",{user_id:y.data.user_id,bank_api_name:n.params.bank,manager_id:(s=t.value)==null?void 0:s.manager_id,card_number:(e=t.value)==null?void 0:e.card_number,card_name:(c=t.value)==null?void 0:c.card_name,summ:(C=t.value)==null?void 0:C.summ,btc_summ:n.query.crypto_amount});console.log(l)}catch(l){console.error(l)}},B=async()=>{try{const s=await o.get("/rub/deposit/carddata/",{params:{bank_api_name:n.params.bank,summ:n.query.amount}});t.value=s.data}catch(s){console.error(s)}},r=Z(),N=u(()=>r.isOpen),D=u(()=>{var s,e;return(s=t.value)!=null&&s.card_number&&((e=t.value.card_number.replace(/\s/g,"").match(/.{1,4}/g))==null?void 0:e.join(" "))||"Номер карты"}),F=u(()=>{var e;if(!((e=t.value)!=null&&e.summ))return"0.00";const s=t.value.summ.replace(",",".");return new Intl.NumberFormat("ru-RU",{minimumFractionDigits:2,maximumFractionDigits:2,useGrouping:!0}).format(Number(s))}),{notificationOccurred:m}=H(),I=()=>{var s;navigator.clipboard.writeText((s=t.value)==null?void 0:s.card_number),m("success")},M=()=>{var s;navigator.clipboard.writeText((s=t.value)==null?void 0:s.summ),m("success")},i=$(),A=async()=>{await x(),_.push("/deposit/receipt")};return i.onBackButtonClicked(()=>{r.setIsOpen(!1),_.back()}),S(async()=>{await B(),i.showBackButton(),r.setIsOpen(!1)}),T(()=>{i.hideBackButton()}),j(N,s=>{console.log("Navbar state changed:",s)}),(s,e)=>{var c;return g(),w("div",V,[a("div",z,[a("div",E,[a("div",G,d(D.value),1),a("div",{class:"copy-icon",onClick:I},[v(b)])]),a("div",J,[a("div",K,d(((c=t.value)==null?void 0:c.card_name)||"ФИО"),1)]),e[0]||(e[0]=a("label",{class:"amount-label"},"При переводе используйте точную сумму",-1)),a("div",P,[a("div",Q,[a("div",W,d(F.value||"Сумма"),1),a("div",{class:"copy-icon",onClick:M},[v(b)])])]),e[1]||(e[1]=a("div",{class:"confirm-info"},[a("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[a("circle",{cx:"8",cy:"8",r:"7.5",stroke:"#04A2FD"}),a("path",{d:"M7.46396 3.62976H8.66588L8.56372 9.42303H7.56612L7.46396 3.62976ZM8.66588 12.1814C8.51364 12.3377 8.31532 12.4158 8.07093 12.4158C7.82654 12.4158 7.62622 12.3377 7.46997 12.1814C7.31372 12.0252 7.2356 11.8249 7.2356 11.5805C7.2356 11.3361 7.31372 11.1358 7.46997 10.9795C7.62622 10.8193 7.82654 10.7391 8.07093 10.7391C8.31532 10.7391 8.51364 10.8173 8.66588 10.9735C8.82213 11.1298 8.90026 11.3321 8.90026 11.5805C8.90026 11.8249 8.82213 12.0252 8.66588 12.1814Z",fill:"white"})]),a("span",null,"После отправки средств нажмите ПОДТВЕРДИТЬ ниже.")],-1))]),a("button",{class:"submit-button",onClick:A},"Подтвердить")])}}}),s1=h(X,[["__scopeId","data-v-63caccca"]]);export{s1 as default};
