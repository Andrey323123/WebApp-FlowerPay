import{d as x,f as o,m as T,g as p,N as V,r as N,c as m,e as t,a as v,s as h,v as w,w as E,T as W,l as M,k as b,o as f,x as U,_ as j}from"./index-RAOsyFim.js";import{C as A,b as D}from"./btc_log-DfBMclnP.js";import{u as F}from"./useNavbarControl-CeODdumk.js";const H={class:"withdraw-coin"},I={class:"withdraw-content-wrapper"},P={class:"selected-coin"},R={class:"withdraw-form"},q={class:"input-group"},z=["placeholder"],G={class:"amount-input"},J=["placeholder"],K=x({__name:"WithdrawCoin",setup(L){M();const a=o(""),s=o(""),c=o(0),u=o(0),i=b("axios"),_=b("user");T(async()=>{await B(),await C()});const B=async()=>{try{const e=await i.get("/btc/balance/",{params:{user_id:_.data.user_id}});c.value=e.data.balance}catch(e){console.error("Error occurred:",e)}},C=async()=>{try{const e=await i.get("/btc/cost/");console.log(e.data),u.value=e.data.cost}catch(e){console.error("Error occurred:",e)}},k=async()=>{try{const e=await i.post("/btc/transfer/",{user_id:_.data.user_id,btc_amount:s.value,transfer_address:a.value});console.log("ТРАНЗАКЦИЯ УСПЕШНО ОТПРАВЛЕННА")}catch{console.error("Error occurred:","В error ХРАНИТСЯ РЕАЛЬНАЯ ОШИБКА")}},y=p(()=>c.value*u.value),l=o({name:"Bitcoin",icon:D,available:c,p_converted:y,short_name:"BTC"}),r=V();r.isBackButtonVisible||r.showBackButton();const g=p(()=>a.value.trim()!==""&&s.value!=="");return r.showBackButton(),r.onBackButtonClicked(()=>{N.back()}),F(),(e,n)=>(f(),m("div",H,[t("div",I,[t("div",P,[v(A,{coin:l.value},null,8,["coin"])]),t("div",R,[t("div",q,[h(t("input",{type:"text","onUpdate:modelValue":n[0]||(n[0]=d=>a.value=d),placeholder:"Адрес "+l.value.short_name,class:"input-field"},null,8,z),[[w,a.value]])]),t("div",G,[h(t("input",{type:"number","onUpdate:modelValue":n[1]||(n[1]=d=>s.value=d),placeholder:l.value.short_name,class:"input-field"},null,8,J),[[w,s.value]])])])]),v(W,{name:"slide-fade"},{default:E(()=>[g.value?(f(),m("button",{key:0,class:"submit-button",onClick:k},"Вывести")):U("",!0)]),_:1})]))}}),X=j(K,[["__scopeId","data-v-c1038468"]]);export{X as default};
