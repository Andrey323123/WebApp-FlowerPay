import{d as C,f as i,u as y,g as x,N as B,r as I,h as N,i as D,c as F,e as s,t as n,j as o,k as _,l as q,o as A,$ as E,_ as M}from"./index-RAOsyFim.js";const O={class:"deposit-form"},S={class:"form-fields"},j={class:"field-block"},H={class:"field-value"},L={class:"field-block"},R={class:"field-value"},T={class:"field-block"},U={class:"field-container"},Z={class:"field-value"},$=C({__name:"ExchangeConfirm",setup(z){i(!1);const l=_("axios"),f=_("user"),r=q(),a=r.query,u=y(),d=i(""),b=i([{name:"СБЕР",bank:"sberbank"},{name:"Т-Банк",bank:"tbank"}]),p=x(()=>{if(!a.will_receive)return"0.00";const e=a.will_receive.replace(",",".");return new Intl.NumberFormat("ru-RU",{minimumFractionDigits:2,maximumFractionDigits:2,useGrouping:!0}).format(Number(e))}),v=async()=>{try{const e=await l.get("/rub/deposit/carddata/",{params:{bank_api_name:r.query.bank,summ:r.query.amount}});d.value=e.data.manager_id}catch(e){console.error(e)}},k=async()=>{try{const e=await l.post("/rub/withdraw/createtransaction/",{user_id:f.data.user_id,manager_id:d.value,card_number:a.card_number,BTC_summ:+a.amount,summ:+a.will_receive});console.log(e)}catch(e){console.error(e)}},{notificationOccurred:h}=E(),c=B();c.onBackButtonClicked(()=>{u.setIsOpen(!1),I.back()});const w=async()=>{await k(),h("success")};return N(async()=>{await v(),c.showBackButton(),u.setIsOpen(!1)}),D(()=>{c.hideBackButton()}),(e,t)=>{var m;return A(),F("div",O,[s("div",S,[s("div",j,[s("div",H,n(o(a).card_number)+" | "+n((m=b.value.find(g=>g.bank==o(a).bank))==null?void 0:m.name),1)]),s("div",L,[s("div",R,n(o(a).amount+" "+o(a).crypto_name),1)]),t[0]||(t[0]=s("label",{class:"amount-label"},"Сумма к зачислению",-1)),s("div",T,[s("div",U,[s("div",Z,n(p.value)+" ₽",1)])]),t[1]||(t[1]=s("div",{class:"confirm-info"},[s("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("circle",{cx:"8",cy:"8",r:"7.5",stroke:"#04A2FD"}),s("path",{d:"M7.46396 3.62976H8.66588L8.56372 9.42303H7.56612L7.46396 3.62976ZM8.66588 12.1814C8.51364 12.3377 8.31532 12.4158 8.07093 12.4158C7.82654 12.4158 7.62622 12.3377 7.46997 12.1814C7.31372 12.0252 7.2356 11.8249 7.2356 11.5805C7.2356 11.3361 7.31372 11.1358 7.46997 10.9795C7.62622 10.8193 7.82654 10.7391 8.07093 10.7391C8.31532 10.7391 8.51364 10.8173 8.66588 10.9735C8.82213 11.1298 8.90026 11.3321 8.90026 11.5805C8.90026 11.8249 8.82213 12.0252 8.66588 12.1814Z",fill:"white"})]),s("span",null,"Нажимая ПОДТВЕРДИТЬ, вы подтвержаете правильность введенных данных.")],-1))]),s("button",{class:"submit-button",onClick:w},"Подтвердить")])}}}),V=M($,[["__scopeId","data-v-a71cf3ce"]]);export{V as default};
